#!/usr/bin/env python3

import requests
import urllib.parse
import urllib3

# Ignorar avisos de SSL
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

API_KEY = "firminoh7778"
API_URL = "https://777apisss.vercel.app/consulta/telefone2/"

def puxar_telefone(telefone):
    query = urllib.parse.quote(telefone)
    url = f"{API_URL}?query={query}&apikey={API_KEY}"

    print(f"\nüîç Consultando: {telefone}")
    print(f"üì° URL: {url}")

    try:
        resposta = requests.get(url, timeout=15, verify=False)
        print(f"‚úÖ Status HTTP: {resposta.status_code}")

        try:
            dados = resposta.json()
            print("üì¶ Dados recebidos:")
            for k, v in dados.items():
                print(f"  - {k}: {v}")
        except Exception:
            print("‚ö†Ô∏è Resposta n√£o veio como JSON. Conte√∫do bruto:")
            print(resposta.text[:500])

    except requests.exceptions.Timeout:
        print("‚è≥ Tempo de resposta excedido!")
    except requests.exceptions.RequestException as e:
        print(f"‚ùå Erro ao consultar: {e}")

if __name__ == "__main__":
    telefone = input("üì± Digite o n√∫mero com DDD (ex: 11987654321): ").strip()
    puxar_telefone(telefone)
