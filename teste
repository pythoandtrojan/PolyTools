#!/usr/bin/env python3

import requests
import urllib.parse
import urllib3

# Ignora os avisos de SSL vencido
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

# Configura√ß√µes da API direta
API_URL = "https://api.encrypt.wtf/new/api.php"
TOKEN = "ifindy"
BASE = "telefone2"

def consultar_telefone(telefone):
    query = urllib.parse.quote(telefone)
    url = f"{API_URL}?token={TOKEN}&base={BASE}&query={query}"

    print(f"\nüîç Consultando: {telefone}")
    print(f"üåê URL: {url}")

    try:
        resposta = requests.get(url, timeout=15, verify=False)
        print(f"‚úÖ Status HTTP: {resposta.status_code}")

        if resposta.status_code == 200:
            try:
                dados = resposta.json()
                print("üì¶ Dados recebidos:")
                for k, v in dados.items():
                    print(f"  - {k}: {v}")
            except Exception:
                print("‚ö†Ô∏è Resposta n√£o veio como JSON. Mostrando texto bruto:")
                print(resposta.text[:500])
        else:
            print(f"‚ùå Erro na API: {resposta.status_code} - {resposta.text[:200]}")

    except requests.exceptions.Timeout:
        print("‚è±Ô∏è Tempo de resposta excedido!")
    except requests.exceptions.RequestException as e:
        print(f"‚ùå Erro de requisi√ß√£o: {e}")

if __name__ == "__main__":
    telefone = input("üì± Digite o n√∫mero com DDD (ex: 11987654321): ").strip()
    consultar_telefone(telefone)
