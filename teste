import requests
import urllib.parse
import urllib3

# Ignorar SSL vencido
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

API_URL = "https://api.encrypt.wtf/new/api.php"
TOKEN = "ifindy"
BASE = "telefone"

def consultar_direto(telefone):
    query = urllib.parse.quote(telefone)
    url = f"{API_URL}?token={TOKEN}&base={BASE}&query={query}"

    print(f"\n🔍 Consultando direto em encrypt.wtf...")
    print(f"🌐 URL: {url}")

    try:
        resposta = requests.get(url, timeout=15, verify=False)
        print(f"📡 Status: {resposta.status_code}")

        try:
            dados = resposta.json()
            print("📦 Resultado:")
            for k, v in dados.items():
                print(f"  - {k}: {v}")
        except Exception:
            print("⚠️ Resposta não veio como JSON. Texto bruto:")
            print(resposta.text[:500])
    except Exception as e:
        print(f"❌ Erro: {e}")

if __name__ == "__main__":
    telefone = input("📱 Digite o telefone com DDD: ").strip()
    consultar_direto(telefone)
